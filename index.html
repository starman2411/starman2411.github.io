<!--
    Simple static Telegram WebApp. Does not verify the WebAppInitData, as a bot token would be needed for that.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>python-telegram-bot Example WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://widget.cloudpayments.ru/bundles/cloudpayments.js"></script>

</head>
<script type="text/javascript">
    Telegram.WebApp.ready();
</script>
<body>
<h1 id="123">123</h1>
</body>
<script type="text/javascript">
    let tg = window.Telegram.WebApp;
    tg.expand();
    console.log(tg.initDataUnsafe.user.id);
    ar = document.getElementById('123');
    ar.innerHTML = window.Telegram.WebApp.initDataUnsafe.start_param;
;
    var payments = new cp.CloudPayments();

    payments.oncomplete = (result) => {
        console.log('result', result);
    }

    var data = { //содержимое элемента data
        CloudPayments: {
            recurrent: {
                        interval: 'Week',
                        period: 1,
            }
        }
    };

    payments.pay("charge", { // options
        publicId: 'pk_07b344e2a8ac2ed58d6c093579079',
        accountId: tg.initDataUnsafe.user.id,
        description: 'Weekly subscription',
        amount: 1,
        currency: 'RUB',
        invoiceId: 1234567,
        data: data
    }).then((result) => {
        // Объект типа WidgetResult
        console.log('result', result);
    });
</script>
</html>